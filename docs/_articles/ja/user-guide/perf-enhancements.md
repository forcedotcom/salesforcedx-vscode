---
title: パフォーマンスの改善
lang: ja
---

Apex や、デプロイ/取得コマンドは、新しいアーキテクチャに移行しています。salesforce-alm プラグインを細分化するための大きな取り組みの一環として、これらのコマンドを独立した Typescript ライブラリと CLI プラグインに移行しました。[詳しくはこちらのブログ記事を参照してください](https://developer.salesforce.com/blogs/2021/02/open-sourcing-salesforce-cli-update-feb-2021.html)。この取り組みには多くの利点がありますが、その中でも特に優れているのがパフォーマンスの向上です。単一ファイルのデプロイや取得では、最新のアーキテクチャを使用することで、パフォーマンスが大幅に向上していることに気づくでしょう。

## 実行プロセスとステータス

このアーキテクチャ変更は、段階的なアプローチで行われます。 Apex ライブラリ、デプロイ/取得ライブラリともに、以下のフェーズで変更を実施しています。

1. 新しいライブラリを作成し、完了する。
2. VS Code で試用可能 - VS Code の設定を提供しているため、オプトインして試用することができます。
3. VS Code でデフォルトでオン - VS Code の設定で、新しいライブラリの有効化をデフォルトで True にします。以前オプトインした後にオプトアウトした場合、この機能を使用するには手動でオプトインし直す必要があります。コマンドが利用可能になり、数ヶ月間使用された後、デフォルトを変更する予定です。
4. CLI が新しいライブラリを使用するように更新します。 VS Code の設定は廃止されます。CLI と VS Code の拡張機能の両方が新しいライブラリを使用しています。

|                          | ライブラリの完成 | VS Code で<br>試用可能 | VS Code で<br>デフォルトで On | CLI の更新 |
| ------------------------ | :--------------: | :--------------------: | :---------------------------: | :--------: |
| Apex ライブラリ          |        ✔️        |           ✔️           |              ✔️               |     ✔️     |
| デプロイ/取得 ライブラリ |        ✔️        |           ✔️           |              ✔️               |            |

## 設定

Apex ライブラリは完全に実装されていますが、デプロイ/取得のライブラリには対応する VS Code の設定があります。デプロイ/取得の設定にアクセスするには、**[File \(ファイル\)]** > **[Preferences \(基本設定\)]** > **[Settings \(設定\)]** (Windows or Linux) または **[Code \(コード\)]** > **[Preferences \(基本設定\)]** > **[Settings \(設定\)]** (macOS) を選択します。false に設定すると、VS Code は CLI を使用してそれらのコマンドを実行します。

設定の中に、以下があります。

1. _Experimental: Deploy Retrieve_

既知のギャップは以下の通りです。

- [CLI プラグインのフック](https://developer.salesforce.com/docs/atlas.en-us.sfdx_cli_plugins.meta/sfdx_cli_plugins/cli_plugins_customize_hooks.htm)を使用している場合、VS Code からライブラリを使用するとそれらは利用できません。上記の設定のチェックを外して、それらのコマンドについては直接 CLI を使用してください。

他にもギャップを発見したり、フィードバックがある場合は、[GitHub で Issue を登録](https://github.com/forcedotcom/salesforcedx-vscode/issues/new/choose)してください。
