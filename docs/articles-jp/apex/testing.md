---
title: Apex テスト
---

Apex テストは、ファイル内または [Apex Tests \(Apex テスト\)] サイドバーから実行できます。このサイドバーは、テストを処理する他の便利な機能も備えています。

## Apex テストの解説

[Apex Tests \(Apex テスト\)] サイドバーにはいくつかの機能があります。ここでは、すべての Apex テストを一覧表示できます。1 つのテストメソッドを実行することも、1 つのクラスの複数のテストメソッドを実行することも、すべてのテストを実行することも可能です。最新のテスト実行の結果を表示できます。さらに、そうしたテスト結果から、コードの対応する行に移動することもできます。このサイドバーにアクセスするには、VS Code ウィンドウの左側にあるビューバーのビーカーアイコン \(フロート表示テキスト: [Test \(テスト\)]\) をクリックします\(このアイコンが表示されない場合は、VS Code で開いているプロジェクトのルートディレクトリに `sfdx-project.json` ファイルがあることを確認します\)。

選択したテストを実行する場合、[Apex Tests \(Apex テスト\)] ビューで、テストメソッドまたはクラスの名前にカーソルを置くと、再生アイコンが表示されます。再生アイコン \(フロート表示テキスト: [Run Single Test \(1 つのテストの実行\)]\) をクリックして、1 つのテストメソッドまたは 1 つのクラスのすべてのメソッドを実行します。すべてのテストを実行する場合は、[Apex Tests \(Apex テスト\)] ビューの上部にある大きめの再生アイコン \(フロート表示テキスト: [Run Tests \(テストの実行\)]\) をクリックします。

テストの実行後、クラスやメソッドの横にある青いアイコンが、緑のアイコン \(テストに合格した場合\) または赤いアイコン \(テストに不合格の場合\) に変わります。テスト実行の詳細を表示するには、サイドバーのテストクラスの名前にカーソルを置きます。

テストクラス、合格したテストメソッド、まだ実行していないメソッドの定義に移動するには、サイドバーの該当する名前をクリックします。失敗したテストメソッドの名前をクリックすると、失敗した assert ステートメントに移動します。

テスト結果をクリアするには、サイドバーの上部にある更新アイコン \(フロート表示テキスト: [Refresh Tests \(テストの更新\)]\) をクリックします。

## ファイル内からの Apex テストの実行

Apex テストを実行するには、`.cls` ファイルで、Apex テストメソッドまたはクラスの定義の上にある **[Run Test \(テストの実行\)]** または **[Run All Tests \(すべてのテストの実行\)]** をクリックします。  
![[Run Test (テストの実行)] または [Run All Tests (すべてのテストの実行)] コードレンズを使用した Apex テストの実行](../../images/apex_test_run.gif)

テスト実行の結果が [Output \(出力\)] パネルに表示されます。出力の [Failures \(不合格\)] セクションには、不合格になったテストのスタック追跡がリストされます。不合格の原因となったコード行に移動するには、Ctrl キー　\(Windows、Linux\) または Cmd キー \(macOS\) を押して、そのスタック追跡をクリックします。

Apex テストの実行後は、コマンドパレットで 2 つの新しいコマンドを使用できます。**[SFDX: Re-Run Last Invoked Apex Test Class \(SFDX: 最後に呼び出された Apex テストクラスを再実行\)]** と **[SFDX: Re-Run Last Invoked Apex Test Method \(SFDX: 最後に呼び出された Apex テストメソッドを再実行\)]** です。

Apex テストの実行時にコードカバー率の結果を取得するには、ワークスペース設定を編集して、`salesforcedx-vscode-core.retrieve-test-code-coverage` を `true` にします。
