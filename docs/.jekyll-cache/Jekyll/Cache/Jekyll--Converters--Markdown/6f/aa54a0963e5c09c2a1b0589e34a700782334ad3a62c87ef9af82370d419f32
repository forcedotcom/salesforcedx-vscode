I"<p>ここでは、VS Code 向け Salesforce 拡張機能の使用時に生じる可能性がある障害の対処方法について説明します。</p>

<h2 id="sfdx-コマンドを使用できない">SFDX コマンドを使用できない</h2>

<p>コマンドパレットに SFDX コマンドが 1 つも表示されない場合は、Salesforce DX プロジェクトで作業していることと、Salesforce CLI が最新バージョンであることを確認してください。</p>

<ol>
  <li>VS Code で開いているプロジェクトのルートディレクトリに <code>sfdx-project.json</code> ファイルがあることを確認します。Salesforce DX プロジェクトを設定していない場合は、『Salesforce DX 開発者ガイド』の<a href="https://developer.salesforce.com/docs/atlas.en-us.sfdx_dev.meta/sfdx_dev/sfdx_dev_workspace_setup.htm">「プロジェクトの設定」</a>を参照してください。</li>
  <li>『Salesforce DX 設定ガイド』の説明に従って<a href="https://developer.salesforce.com/docs/atlas.en-us.sfdx_setup.meta/sfdx_setup/sfdx_setup_update_cli.htm">Salesforce CLI を更新</a>します。</li>
</ol>

<h2 id="java-バージョンの設定">Java バージョンの設定</h2>

<p>関連資料: <a href="getting-started/java-setup">Java の設定</a></p>

<h2 id="apex-言語サーバの出力の監視">Apex 言語サーバの出力の監視</h2>

<p>Apex 言語サーバは、<a href="https://github.com/Microsoft/language-server-protocol">言語サーバプロトコル</a> 3.0 仕様の実装です。この言語サーバプロトコルにより、ツール (この場合は VS Code) が言語スマートネスプロバイダ (サーバ) と通信できるようになります。VS Code は Apex 言語サーバを使用して、Apex クラスやトリガのアウトライン、コード補完候補、構文エラーを表示します。Apex 言語サーバからのすべての診断情報を確認するには、<strong>[View (表示)]</strong> &gt; <strong>[Output (出力)]</strong> を選択し、ドロップダウンメニューから <strong>[Apex Language Server (Apex 言語サーバ)]</strong> を選択します。この診断情報に、言語サーバの進捗状況に対するインサイトが示され、発生した問題を確認できます。</p>

<h2 id="apex-言語サーバの有効化">Apex 言語サーバの有効化</h2>

<p>Apex 機能を使用できない場合は、Apex 言語サーバを有効にします。VS Code のメニューバーで、<strong>[View (表示)]</strong> &gt; <strong>[Output (出力)]</strong> を選択し、右側のドロップダウンリストから <strong>[Apex Language Server (Apex 言語サーバ)]</strong> を選択します。[Apex Language Server (Apex 言語サーバ)] というエントリが表示されない場合は、言語サーバが有効になっていません。</p>

<p>Apex 言語サーバが有効になっていない場合は、次の操作を実行したことを確認します。</p>

<ol>
  <li>有効な <code>sfdx-project.json</code> ファイルがある Salesforce DX プロジェクトを開く。</li>
  <li>Salesforce DX プロジェクトを最上位フォルダとして開く。</li>
  <li>Java 8 または Java 11 をインストールする。どちらのバージョンもインストールされていない場合は警告が表示されます。</li>
</ol>

<p>上記の操作をすべて行っても機能しない場合は、VS Code 自体にエラーがないか確認します。VS Code のメニューバーで、<strong>[Help (ヘルプ)]</strong> &gt; <strong>[Toggle Developer Tools (開発者ツールの切り替え)]</strong> を選択して、<strong>[Console (コンソール)]</strong> をクリックし、関連のあるメッセージを探します。</p>

<h2 id="デバッガのエラーの表示">デバッガのエラーの表示</h2>

<p>デバッガが生成したエラーを表示するには、<code>launch.json</code> ファイルに <code>"trace": "all"</code> を追加します。次に、シナリオを再実行して、VS Code のデバッグコンソールにデバッガログの行を表示します。</p>

<h2 id="apex-コードのリリース時間の短縮">Apex コードのリリース時間の短縮</h2>

<p>Apex コードのリリースに時間がかかる場合は、組織の <code>CompileOnDeploy</code> 基本設定が <code>true</code> になっている可能性があります。この設定についての詳細は、『Apex 開発者ガイド』の<a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_deploying.htm">「Apex のリリース」</a>を参照してください。</p>

<h2 id="その他のリソース">その他のリソース</h2>

<p>Apex デバッガのトラブルシューティング情報については、<a href="../apex/interactive-debugger">「Apex 対話型デバッガ」</a>を参照してください。</p>

<p>VS Code の一般的な情報については、<a href="https://code.visualstudio.com/docs">『Visual Studio Code Docs』</a>を参照してください。</p>

<p>VS Code 向け Salesforce 拡張機能の大半の機能を実行する Salesforce CLI のトラブルシューティング情報については、『Salesforce DX 開発者ガイド』の<a href="https://developer.salesforce.com/docs/atlas.en-us.sfdx_dev.meta/sfdx_dev/sfdx_dev_troubleshoot.htm">「Salesforce DX のトラブルシューティング」</a>を参照してください。</p>
:ET