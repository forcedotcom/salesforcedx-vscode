---
description: Validation steps for code changes
globs:
alwaysApply: true
---

After ANY code change, run these in order from repo root. Avoid responding while failures are present, iterate more.

1. `npm run compile` - must pass
2. `npm run lint` - fix any new errors
3. `npm run test` - must pass
4. `npx knip` - check for dead code related to your changes
   - **Fix ALL unused exports** - if knip shows unused exports, remove them immediately unless they're used for tests
   - Don't leave any exports that are only used within the same file

Rules:

- Don't change /src AND /test together (except imports/renames)
- Bundle changes need: `npx lerna run bundle:extension`
- Port 3001 for tests (not 3000 - Docker/Grafana uses that)
- All commands run from salesforcedx-vscode root
