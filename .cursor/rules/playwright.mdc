---
globs: *.spec.ts,**/test/web/**,**/test/playwright/**
alwaysApply: false
---

## Waiting and Timing

Never use `waitForTimeout`. Always wait for something specific on the page:

- Use `page.waitForSelector()` to wait for elements to appear
- Use `expect(locator).toBeVisible()` to wait for visibility
- Use `page.waitForLoadState()` for page state changes

Do not use `page.waitForResponse()` for network requests because it doesn't work in desktop/electron.

## File System and VS Code API

**NEVER use Node.js fs/path or VS Code API** - only work in desktop, not web.

**Use UI interactions instead:**

- `Control+p` - Quick Open
- `Control+Home`, `Control+s` - navigate and save
- `page.keyboard.type()` - edit content
- Monaco editor selectors - interact with editor

Tests must work identically in web and desktop.

## Selectors and Assertions

Prefer `aria` (getByRole) over css selectors

`expect` assertions need clear error messages. Import `expect` from playwright

## Commands and Shortcuts

Use f1 for commands, not meta-shift-P. Use `Control` for all. No ControlOrMeta

## Debugging

Use @https://playwright.dev/docs/api/class-locator#locator-inner-html on a known-good locator and use the result to get more accurate locators for stuff inside it.

Fail early, avoid creating fallbacks.

Use emojis infrequently.

Read the playwright docs
